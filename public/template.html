<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Qu·∫£n L√Ω H·ªá Th·ªëng IoT</title>
    <!-- Nh√∫ng Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Nh√∫ng Font Awesome (Icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <!-- Nh√∫ng Chart.js cho Bi·ªÉu ƒê·ªì -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>

    <style>
        /* CSS T√πy Ch·ªânh N√¢ng C·∫•p */
        body {
            /* M√†u n·ªÅn nh·∫π nh√†ng, chuy√™n nghi·ªáp */
            background-color: #f5f7fa; 
        }
        .navbar {
            /* Shadow s√¢u h∆°n, vi·ªÅn d∆∞·ªõi t·∫°o ƒëi·ªÉm nh·∫•n */
            box-shadow: 0 4px 10px rgba(0,0,0,.15);
            border-bottom: 3px solid #1abc9c;
        }
        .card {
            /* Bo tr√≤n l·ªõn h∆°n cho c·∫£m gi√°c hi·ªán ƒë·∫°i */
            border-radius: 0.8rem; 
            border: none;
        }
        .card-sensor {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            cursor: pointer;
            border-left: 6px solid; /* Vi·ªÅn d√†y h∆°n */
        }
        .card-sensor:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.15); /* Shadow n·ªïi b·∫≠t */
        }
        
        /* M√†u cho t·ª´ng lo·∫°i sensor (S·ª≠ d·ª•ng m√†u s·∫Øc Bootstrap t·ªëi h∆°n cho ƒë·ªô t∆∞∆°ng ph·∫£n) */
        .temp { border-left-color: #dc3545; } /* ƒê·ªè Danger */
        .humi { border-left-color: #0d6efd; } /* Xanh D∆∞∆°ng Primary */
        .pres { border-left-color: #ffc107; } /* V√†ng Warning */
        .alti { border-left-color: #198754; } /* Xanh L√° Success */
        
        .value-large {
            font-size: 3rem; 
            font-weight: 800; /* In ƒë·∫≠m h∆°n */
            color: #343a40; /* M√†u ch·ªØ t·ªëi */
        }
        /* Style cho Control Panel m·ªõi */
        .control-panel {
            background-color: #ffffff;
            border-radius: 0.8rem;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,.08);
            margin-bottom: 2rem;
        }
        /* Style cho khu v·ª±c l·ªçc chart */
        .filter-section {
            background-color: #ffffff;
            border-radius: 0.8rem;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,.08);
        }
    </style>
</head>
<body>

    <!-- Header / Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="#">
                <i class="fas fa-satellite-dish me-2"></i>
                IoT Monitor Dashboard
            </a>
            
            <div class="d-flex align-items-center">
                
                <!-- 1. Dropdown Ch·ªçn Thi·∫øt B·ªã -->
                <div class="me-4">
                    <div class="dropdown">
                        <button class="btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="device-selector-btn">
                            <i class="fas fa-microchip me-1"></i> Thi·∫øt B·ªã: <strong id="device-name">Thi·∫øt B·ªã Ch√≠nh (ID: 1)</strong>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-dark">
                            <!-- L∆∞u √Ω: ID device-name ƒë√£ ƒë∆∞·ª£c gi·ªØ l·∫°i v√† d√πng ƒë·ªÉ hi·ªÉn th·ªã t√™n thi·∫øt b·ªã hi·ªán t·∫°i -->
                            <li><a class="dropdown-item active" href="#" data-device-id="1">Thi·∫øt B·ªã Ch√≠nh (Ph√≤ng 1)</a></li>
                            <li><a class="dropdown-item" href="#" data-device-id="2">Thi·∫øt B·ªã Khu V·ª±c B</a></li>
                            <li><a class="dropdown-item" href="#" data-device-id="3">Thi·∫øt B·ªã Khu V·ª±c C</a></li>
                        </ul>
                    </div>
                </div>

                <!-- 2. Th√¥ng tin T√†i kho·∫£n v√† ƒêƒÉng xu·∫•t -->
                <span class="navbar-text text-light me-3 d-none d-lg-inline">
                    <i class="fas fa-user-circle me-1"></i> Ch√†o, <strong id="user-account">Admin@Dashboard</strong>
                </span>
                <button id="logout-btn" class="btn btn-danger btn-sm shadow-sm">
                    <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid mt-5">
        <h2 class="mb-2 text-center text-secondary fw-bolder">üìä D·ªØ Li·ªáu C·∫£m Bi·∫øn Hi·ªán T·∫°i</h2>
        
        <!-- 3. Hi·ªÉn th·ªã Ng√†y/Gi·ªù -->
        <p class="text-center text-primary fw-medium mb-4 fs-6" id="current-datetime">Ng√†y, gi·ªù hi·ªán t·∫°i: --</p>
        
        <!-- 4. Control Panel (B·∫≠t/T·∫Øt, C·∫≠p nh·∫≠t) -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="control-panel">
                    <h5 class="text-primary mb-3"><i class="fas fa-toggle-on me-2"></i> C√°c Thao T√°c Thi·∫øt B·ªã</h5>
                    <div class="d-flex flex-wrap gap-3">
                        <button id="btn-toggle" class="btn btn-lg btn-success shadow-sm">
                            <i class="fas fa-power-off me-2"></i> B·∫≠t Thi·∫øt B·ªã
                        </button>
                        <button id="btn-sync" class="btn btn-lg btn-primary shadow-sm">
                            <i class="fas fa-sync-alt me-2"></i> Y√™u c·∫ßu C·∫≠p nh·∫≠t Ngay
                        </button>
                        <button id="btn-setting" class="btn btn-lg btn-secondary shadow-sm">
                            <i class="fas fa-sliders-h me-2"></i> C√†i ƒë·∫∑t Ng∆∞·ª°ng c·∫£nh b√°o
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- D√£y c√°c Card hi·ªÉn th·ªã th√¥ng s·ªë ch√≠nh (KPIs) -->
        <!-- L∆ØU √ù: C√°c ID/CLASS (temp, humi, pres, alti, current-temp, etc.) ƒê√É ƒê∆Ø·ª¢C GI·ªÆ NGUY√äN -->
        <div class="row">
            
            <div class="col-xl-3 col-md-6 mb-4">
                <div class="card shadow-lg card-sensor temp h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-auto me-3">
                                <i class="fas fa-thermometer-three-quarters fa-4x text-danger"></i>
                            </div>
                            <div class="col">
                                <div class="text-uppercase text-danger fw-bold mb-1 fs-5">Nhi·ªát ƒê·ªô</div>
                                <div class="value-large mb-0" id="current-temp">-- ¬∞C</div>
                                <small class="text-muted" id="temp-last-updated">C·∫≠p nh·∫≠t: --</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4">
                <div class="card shadow-lg card-sensor humi h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-auto me-3">
                                <i class="fas fa-tint fa-4x text-primary"></i>
                            </div>
                            <div class="col">
                                <div class="text-uppercase text-primary fw-bold mb-1 fs-5">ƒê·ªô ·∫®m</div>
                                <div class="value-large mb-0" id="current-humi">-- %</div>
                                <small class="text-muted" id="humi-last-updated">C·∫≠p nh·∫≠t: --</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4">
                <div class="card shadow-lg card-sensor pres h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-auto me-3">
                                <i class="fas fa-cloud fa-4x text-warning"></i>
                            </div>
                            <div class="col">
                                <div class="text-uppercase text-warning fw-bold mb-1 fs-5">√Åp Su·∫•t</div>
                                <div class="value-large mb-0" id="current-pres">-- hPa</div>
                                <small class="text-muted" id="pres-last-updated">C·∫≠p nh·∫≠t: --</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4">
                <div class="card shadow-lg card-sensor alti h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-auto me-3">
                                <i class="fas fa-mountain fa-4x text-success"></i>
                            </div>
                            <div class="col">
                                <div class="text-uppercase text-success fw-bold mb-1 fs-5">ƒê·ªô Cao</div>
                                <div class="value-large mb-0" id="current-alti">-- m</div>
                                <small class="text-muted" id="alti-last-updated">C·∫≠p nh·∫≠t: --</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div> <!-- End row Cards -->

        ---

        <!-- Bi·ªÉu ƒë·ªì v√† B·ªô l·ªçc D·ªØ li·ªáu L·ªãch s·ª≠ (Full Width) -->
        <div class="row mt-4">

            <div class="col-lg-12 mb-4">
                <div class="card shadow-lg mb-4">
                    <div class="card-header py-3 bg-white d-flex justify-content-between align-items-center">
                        <h6 class="m-0 fw-bold text-primary"><i class="fas fa-chart-line me-2"></i>Bi·ªÉu ƒê·ªì L·ªãch S·ª≠</h6>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="chart-selector-btn">
                                Ch·ªçn C·∫£m Bi·∫øn
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" data-sensor="temperature">Nhi·ªát ƒê·ªô</a></li>
                                <li><a class="dropdown-item" href="#" data-sensor="humidity">ƒê·ªô ·∫®m</a></li>
                                <li><a class="dropdown-item" href="#" data-sensor="pressure">√Åp Su·∫•t</a></li>
                                <li><a class="dropdown-item" href="#" data-sensor="altitude">ƒê·ªô Cao</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- Canvas ph·∫£i c√≥ chi·ªÅu cao c·ªë ƒë·ªãnh ƒë·ªÉ Chart.js ho·∫°t ƒë·ªông t·ªët trong container responsive -->
                        <div style="height: 400px;"> 
                            <canvas id="historicalChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- 5. Khu v·ª±c L·ªçc D·ªØ Li·ªáu L·ªãch S·ª≠ v√† Hi·ªÉn th·ªã k·∫øt qu·∫£ -->
                <div class="filter-section mt-4">
                    <h5 class="text-info mb-4"><i class="fas fa-search me-2"></i>Khung T√¨m Ki·∫øm D·ªØ Li·ªáu L·ªãch S·ª≠</h5>
                    <div class="row g-3 align-items-end">
                        <div class="col-md-3">
                            <label for="startDate" class="form-label fw-medium">Ng√†y B·∫Øt ƒê·∫ßu</label>
                            <input type="date" class="form-control" id="startDate">
                        </div>
                        <div class="col-md-3">
                            <label for="endDate" class="form-label fw-medium">Ng√†y K·∫øt Th√∫c</label>
                            <input type="date" class="form-control" id="endDate">
                        </div>
                        <div class="col-md-4">
                            <label for="sensorTypeFilter" class="form-label fw-medium">Lo·∫°i C·∫£m Bi·∫øn</label>
                            <select class="form-select" id="sensorTypeFilter">
                                <option selected value="all">T·∫•t c·∫£ (Nhi·ªát ƒë·ªô, ƒê·ªô ·∫©m, ...)</option>
                                <option value="temperature">Nhi·ªát ƒê·ªô</option>
                                <option value="humidity">ƒê·ªô ·∫®m</option>
                                <option value="pressure">√Åp Su·∫•t</option>
                                <option value="altitude">ƒê·ªô Cao</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button id="btn-search" class="btn btn-warning w-100 shadow">
                                <i class="fas fa-search me-1"></i> T√¨m ki·∫øm
                            </button>
                        </div>
                    </div>
                    
                    <!-- K·∫øt qu·∫£ L·ªçc (Hi·ªÉn th·ªã th√¥ng tin) -->
                    <div class="mt-4 p-3 border rounded bg-light" id="filter-results-summary">
                        <h6 class="text-success"><i class="fas fa-chart-bar me-1"></i> K·∫øt qu·∫£ ph√¢n t√≠ch d·ªØ li·ªáu l·ªçc:</h6>
                        <p class="mb-1" id="result-count">ƒê√£ t√¨m th·∫•y **0** ƒëi·ªÉm d·ªØ li·ªáu.</p>
                        <p class="mb-1" id="result-temp">Nhi·ªát ƒë·ªô (TB/Cao nh·∫•t/Th·∫•p nh·∫•t): --</p>
                        <p class="mb-1" id="result-humi">ƒê·ªô ·∫©m (TB/Cao nh·∫•t/Th·∫•p nh·∫•t): --</p>
                        <p class="mb-0 text-muted">Nh·∫•n n√∫t "T√¨m ki·∫øm" ƒë·ªÉ t·∫£i d·ªØ li·ªáu l·ªãch s·ª≠ v√† xem t√≥m t·∫Øt.</p>
                    </div>
                </div>
            </div>

        </div> <!-- End row Bi·ªÉu ƒë·ªì v√† B·ªô l·ªçc -->

    </div> <!-- End container-fluid -->

    <!-- Footer -->
    <footer class="bg-dark text-light p-3 mt-5">
        <div class="container-fluid text-center">
            <p class="mb-0">¬© 2025 H·ªá Th·ªëng Qu·∫£n L√Ω IoT. Thi·∫øt k·∫ø b·ªüi Gemini, s·ª≠ d·ª•ng Bootstrap 5 v√† Chart.js.</p>
        </div>
    </footer>

    <!-- Nh√∫ng Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Script X·ª≠ l√Ω Logic (ƒê·∫£m b·∫£o ID ƒë∆∞·ª£c gi·ªØ nguy√™n) -->
    <script>
        // =======================================================
        // PH·∫¶N LOGIC JAVASCRIPT: T∆Ø∆†NG T√ÅC V·ªöI UI (GI·ªÆ NGUY√äN ID)
        // =======================================================

        const CHART_COLORS = {
            'temperature': { color: '#e74c3c', bg: 'rgba(231, 76, 60, 0.1)' },
            'humidity': { color: '#3498db', bg: 'rgba(52, 152, 219, 0.1)' },
            'pressure': { color: '#f1c40f', bg: 'rgba(241, 196, 15, 0.1)' },
            'altitude': { color: '#2ecc71', bg: 'rgba(46, 204, 113, 0.1)' }
        };

        // 1. Kh·ªüi t·∫°o Bi·ªÉu ƒë·ªì (ID: historicalChart)
        const ctx = document.getElementById('historicalChart').getContext('2d');
        let historicalChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['1h tr∆∞·ªõc', '45m tr∆∞·ªõc', '30m tr∆∞·ªõc', '15m tr∆∞·ªõc', 'Hi·ªán t·∫°i'],
                datasets: [{
                    label: 'Nhi·ªát ƒê·ªô (¬∞C)',
                    data: [27.5, 28.0, 28.5, 28.3, 28.5],
                    borderColor: CHART_COLORS.temperature.color,
                    tension: 0.4,
                    fill: true,
                    backgroundColor: CHART_COLORS.temperature.bg,
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: true } },
                scales: { y: { beginAtZero: false } }
            }
        });

        // 2. C·∫≠p nh·∫≠t Ng√†y/Gi·ªù hi·ªán t·∫°i (ID: current-datetime)
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' };
            document.getElementById('current-datetime').textContent = `Ng√†y, gi·ªù hi·ªán t·∫°i: ${now.toLocaleDateString('vi-VN', options)}`;
        }
        updateDateTime();
        setInterval(updateDateTime, 1000); 

        // 3. X·ª≠ l√Ω logic Device Selector (ID: device-selector-btn, device-name)
        document.querySelectorAll('.dropdown-menu a').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.dropdown-menu a').forEach(a => a.classList.remove('active'));
                this.classList.add('active');
                
                const deviceName = this.textContent;
                // C·∫≠p nh·∫≠t t√™n thi·∫øt b·ªã trong navbar (ID: device-name)
                document.getElementById('device-name').textContent = deviceName; 
                
                // C·∫≠p nh·∫≠t button ch√≠nh (ID: device-selector-btn)
                document.getElementById('device-selector-btn').innerHTML = `<i class="fas fa-microchip me-1"></i> Thi·∫øt B·ªã: <strong>${deviceName}</strong>`;

                console.log(`ƒê√£ ch·ªçn thi·∫øt b·ªã ID: ${this.getAttribute('data-device-id')}. C·∫ßn g·ªçi API t·∫£i d·ªØ li·ªáu.`);
                updateCurrentData(); 
            });
        });


        // 4. H√†m gi·∫£ l·∫≠p c·∫≠p nh·∫≠t d·ªØ li·ªáu hi·ªán t·∫°i (S·ª≠ d·ª•ng c√°c ID KPI: current-temp, current-humi, etc.)
        function updateCurrentData() {
            // **TODO: Thay th·∫ø b·∫±ng Fetch API g·ªçi /api/latest?device_id=X**
            const latest = {
                temp: { value: (Math.random() * 2 + 27).toFixed(1), time: new Date().toLocaleTimeString() },
                humi: { value: (Math.random() * 5 + 60).toFixed(1), time: new Date().toLocaleTimeString() },
                pres: { value: (Math.random() * 5 + 1010).toFixed(1), time: new Date().toLocaleTimeString() },
                alti: { value: (Math.random() * 1 + 54).toFixed(1), time: new Date().toLocaleTimeString() }
            };

            document.getElementById('current-temp').textContent = `${latest.temp.value} ¬∞C`;
            document.getElementById('temp-last-updated').textContent = `C·∫≠p nh·∫≠t: ${latest.temp.time}`;
            
            document.getElementById('current-humi').textContent = `${latest.humi.value} %`;
            document.getElementById('humi-last-updated').textContent = `C·∫≠p nh·∫≠t: ${latest.humi.time}`;

            document.getElementById('current-pres').textContent = `${latest.pres.value} hPa`;
            document.getElementById('pres-last-updated').textContent = `C·∫≠p nh·∫≠t: ${latest.pres.time}`;
            
            document.getElementById('current-alti').textContent = `${latest.alti.value} m`;
            document.getElementById('alti-last-updated').textContent = `C·∫≠p nh·∫≠t: ${latest.alti.time}`;
        }
        updateCurrentData();
        setInterval(updateCurrentData, 5000); 


        // 5. X·ª≠ l√Ω logic Bi·ªÉu ƒë·ªì (ID: chart-selector-btn)
        document.querySelectorAll('.dropdown-menu a[data-sensor]').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const sensorType = this.getAttribute('data-sensor');
                const labelMap = { 
                    'temperature': 'Nhi·ªát ƒê·ªô', 'humidity': 'ƒê·ªô ·∫®m', 
                    'pressure': '√Åp Su·∫•t', 'altitude': 'ƒê·ªô Cao' 
                };
                const unitMap = { 
                    'temperature': '¬∞C', 'humidity': '%', 
                    'pressure': 'hPa', 'altitude': 'm' 
                };

                document.getElementById('chart-selector-btn').textContent = labelMap[sensorType];

                // **TODO: G·ªçi API l·∫•y d·ªØ li·ªáu l·ªãch s·ª≠ theo sensorType**

                // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì (Gi·∫£ l·∫≠p d·ªØ li·ªáu)
                const mockData = {
                    'temperature': [27.5, 28.0, 28.5, 28.3, 28.5, 29.0, 29.1],
                    'humidity': [60, 62, 65, 63, 65.2, 66, 65.5],
                    'pressure': [1010, 1011, 1012.3, 1012, 1012.3, 1013, 1012.8],
                    'altitude': [54.5, 55.0, 55.5, 54.8, 55.0, 55.2, 55.1]
                };
                const mockLabels = ['4h tr∆∞·ªõc', '3h tr∆∞·ªõc', '2h tr∆∞·ªõc', '1h tr∆∞·ªõc', '30m tr∆∞·ªõc', '15m tr∆∞·ªõc', 'Hi·ªán t·∫°i'];

                historicalChart.data.labels = mockLabels;
                historicalChart.data.datasets[0].label = `${labelMap[sensorType]} (${unitMap[sensorType]})`;
                historicalChart.data.datasets[0].data = mockData[sensorType];
                historicalChart.data.datasets[0].borderColor = CHART_COLORS[sensorType].color;
                historicalChart.data.datasets[0].backgroundColor = CHART_COLORS[sensorType].bg;
                historicalChart.update();
            });
        });


        // 6. X·ª≠ l√Ω logic B·ªô l·ªçc d·ªØ li·ªáu (ID: btn-search, filter-results-summary)
        document.getElementById('btn-search').addEventListener('click', function() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const sensorTypeFilter = document.getElementById('sensorTypeFilter').value;

            if (!startDate || !endDate) {
                document.getElementById('filter-results-summary').innerHTML = '<h6 class="text-danger"><i class="fas fa-times-circle me-1"></i> Vui l√≤ng ch·ªçn c·∫£ Ng√†y B·∫Øt ƒê·∫ßu v√† Ng√†y K·∫øt Th√∫c.</h6>';
                return;
            }

            // **TODO: G·ªåI API BACKEND: fetch(`/api/history/filter?start=${startDate}&end=${endDate}&type=${sensorTypeFilter}`)**
            console.log(`ƒêang t√¨m ki·∫øm d·ªØ li·ªáu t·ª´ ${startDate} ƒë·∫øn ${endDate} cho lo·∫°i: ${sensorTypeFilter}`);

            // Gi·∫£ l·∫≠p k·∫øt qu·∫£
            const mockResults = {
                count: Math.floor(Math.random() * 5000) + 1000,
                temp: { avg: (Math.random() * 3 + 27).toFixed(1), max: (Math.random() * 1 + 30).toFixed(1), min: (Math.random() * 1 + 25).toFixed(1) },
                humi: { avg: (Math.random() * 5 + 60).toFixed(1), max: (Math.random() * 1 + 68).toFixed(1), min: (Math.random() * 1 + 55).toFixed(1) }
            };
            
            // C·∫≠p nh·∫≠t k·∫øt qu·∫£ v√†o ID: filter-results-summary v√† c√°c ID con
            document.getElementById('filter-results-summary').innerHTML = `
                <h6 class="text-success"><i class="fas fa-chart-bar me-1"></i> K·∫øt qu·∫£ ph√¢n t√≠ch d·ªØ li·ªáu l·ªçc:</h6>
                <p class="mb-1" id="result-count">ƒê√£ t√¨m th·∫•y **${mockResults.count}** ƒëi·ªÉm d·ªØ li·ªáu.</p>
                <p class="mb-1" id="result-temp">Nhi·ªát ƒë·ªô (TB/Cao nh·∫•t/Th·∫•p nh·∫•t): **${mockResults.temp.avg}¬∞C** / **${mockResults.temp.max}¬∞C** / **${mockResults.temp.min}¬∞C**</p>
                <p class="mb-1" id="result-humi">ƒê·ªô ·∫©m (TB/Cao nh·∫•t/Th·∫•p nh·∫•t): **${mockResults.humi.avg}%** / **${mockResults.humi.max}%** / **${mockResults.humi.min}%**</p>
                <p class="mb-0 text-muted">D·ªØ li·ªáu ƒë∆∞·ª£c l·∫•y t·ª´ ${startDate} ƒë·∫øn ${endDate}.</p>
            `;
        });
        
        // 7. X·ª≠ l√Ω c√°c button ƒëi·ªÅu khi·ªÉn (ID: btn-toggle, btn-sync, btn-setting)
        document.getElementById('btn-toggle').addEventListener('click', function() {
            const isOff = this.textContent.includes('T·∫Øt');
            if (isOff) {
                this.innerHTML = '<i class="fas fa-power-off me-2"></i> B·∫≠t Thi·∫øt B·ªã';
                this.classList.remove('btn-danger');
                this.classList.add('btn-success');
                console.log('ƒê√£ g·ª≠i l·ªánh: B·∫¨T Thi·∫øt B·ªã');
            } else {
                this.innerHTML = '<i class="fas fa-power-off me-2"></i> T·∫Øt Thi·∫øt B·ªã';
                this.classList.remove('btn-success');
                this.classList.add('btn-danger');
                console.log('ƒê√£ g·ª≠i l·ªánh: T·∫ÆT Thi·∫øt B·ªã');
            }
        });

        document.getElementById('btn-sync').addEventListener('click', () => console.log('ƒê√£ g·ª≠i l·ªánh: Y√™u c·∫ßu c·∫≠p nh·∫≠t Th√¥ng s·ªë.'));
        document.getElementById('btn-setting').addEventListener('click', () => console.log('M·ªü Modal C√†i ƒë·∫∑t th√¥ng s·ªë n√¢ng cao.'));
        document.getElementById('logout-btn').addEventListener('click', () => console.log('ƒê√£ th·ª±c hi·ªán ƒêƒÉng xu·∫•t.'));
    </script>

</body>
</html>